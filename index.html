<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script type="text/javascript"
    src="app.js">
  </script>
  <title>Java Hotel YC</title>

</head>

<body>
  <div id="nav-placeholder">

  </div>

  <div class="hero-wrapper">
    <div class="container text-center">
      <h1>Zoek beschikbare kamers</h1>
      <div class="hero-form">
        <form action="/showRooms.html" method="GET" id="submitForm">
          <div class="row">
            <div class="col-12 col-lg-3">
              <label for="checkInDate">Aankomst</label>
              <input type="date" class="form-control" id="checkInDate" name="checkInDate" required>
            </div>
            <div class="col-12 col-lg-3">
              <label for="checkOutDate">Vertrek</label>
              <input type="date" class="form-control" id="checkOutDate" name="checkOutDate" required>
            </div>
            <div class="col-12 col-lg-3">
              <label for="adults">Personen</label>
              <input type="number" class="form-control" id="adults" name="adults">
            </div>
            <div class="col-12 col-lg-3 d-grid">
              <label>&nbsp;</label>
              <button type="submit" class="btn btn-primary">Zoek</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>


  <section class="reviewsContainerSection">

    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h2 class="section-header">Gastenboek</h2>
          <hr class="section-line">
        </div>
      </div>
      
      <div class="row mb-5" id="reviewsContainer">
      </div>
    </div>
  </section>

  
  <section class="symbols">
    <div class="container">
      <div class="row">
        <div class="col-md-4 symbol-item">
          <i class="fa fa-tag fa-4x"></i>
          <h3>Lowest Price Guarantee</h3>
          <p>Always the best prices!</p>
        </div>
        <div class="col-md-4 symbol-item">
          <i class="fa fa-car fa-4x"></i>
          <h3>Free Parking</h3>
          <p>Our Hotels always have parking spaces available. Parking is free at almost all of our hotels.</p>
        </div>
        <div class="col-md-4 symbol-item">
          <i class="fa fa-wifi fa-4x"></i>
          <h3>Free WiFi</h3>
          <p>Free internet access. Including the hotel rooms.</p>
        </div>
      </div>
    </div>
  </section>
  

  

  <section class="hotel-info hotel-section">
    <div class="container">
      <div class="row">
        <div class="col-12 col-md-6">
          <h2 class="section-header">Welkom bij Fawlty Towers</h2>
          <hr class="section-line">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed fringilla diam vel eros condimentum, at fermentum elit facilisis. Duis venenatis dictum enim, at vestibulum mauris facilisis ut. Nulla facilisi. Integer ut massa sit amet risus sodales lacinia.</p>
          <p>Phasellus tristique, nunc eu efficitur lacinia, velit sem iaculis orci, a pulvinar erat purus id purus. Nam non placerat magna, ac dapibus mauris. Quisque tincidunt commodo mauris, vitae auctor ligula convallis a. Mauris a congue ligula.</p>
          <p>Nullam id massa non felis accumsan varius in sed sem. In sed erat id ex tincidunt blandit. Vestibulum fringilla dictum mauris, vitae euismod quam tristique a. Fusce rhoncus eros eget mi semper, sit amet pharetra sem consectetur.</p>
        </div>
        <div class="col-12 col-md-6 d-flex align-items-center">
          <div class="embed-responsive embed-responsive-16by9">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/N1qAF8VAgVA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
        </div>
      </div>
    </div>
  </section>


  <div id="footer-placeholder">

  </div>
  
  <script>  
  $(function(){
    $("#nav-placeholder").load("navbar.html");
  });
  $(function(){
    $("#footer-placeholder").load("footer.html");
  });

  function showReviews(){
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          var allReviews = JSON.parse(this.responseText);
          const shuffleArray = arr => arr.sort(() => Math.random() - 0.5);
          const shuffledArr = shuffleArray(allReviews);
          
          var reviewsHTML = '';
          for (var i = 0; i < 3; i++) {
            var review = shuffledArr[i];
            var starScoreHTML="";
            for(var j = 0; j < review.rating; j++){
              starScoreHTML += '<i class="fa fa-star ratingStars"></i>';
            }
            reviewsHTML += `
              <div class="col-md-4">
                <div class="card p-3">
                  <h4>${review.name}</h4>
                  <h5>${starScoreHTML}</h5>
                  <p> ${review.reviewText}</p>
                </div>
              </div>
            `;
          }
          document.getElementById("reviewsContainer").innerHTML = reviewsHTML;
        }
      };

      xhr.open("GET", url+"/ApprovedReviews", true)
      xhr.send();
  }

  showReviews();

  // Validation that check-in is before check-out
  // Validation will occur when submit is clicked

  document.getElementById("submitForm").addEventListener("submit", function(event) {
    var checkInDateInput = new Date(document.getElementById("checkInDate").value);
    var checkOutDateInput = new Date(document.getElementById("checkOutDate").value);
    if (checkInDateInput >= checkOutDateInput){
      event.preventDefault(); //Prevents the submission event
      alert("Aankomst kan niet na vertrek zijn. Controleer uw opgegeven datums.");
    }
  });
</script>
</body>

</html>

